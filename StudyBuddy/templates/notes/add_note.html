{% extends 'base.html' %}

{% block title %}Создать конспект{% endblock %}
{% block page_title %}Создать конспект{% endblock %}

{% block content %}
<div class="w-full max-w-2xl mx-auto">
    <form id="note-form" method="post" class="card bg-base-100 shadow-md p-6 space-y-6">
        {% csrf_token %}
        <div class="form-control">
            <label for="title" class="label">
                <span class="label-text font-medium">Название</span>
            </label>
            <input type="text" name="title" id="title" class="input input-bordered w-full" required>
        </div>
        <div class="form-control">
            <label class="label">
                <span class="label-text font-medium">Содержимое</span>
            </label>
            <div id="editor-container" class="bg-white rounded border border-base-300 min-h-[300px] max-h-[600px] overflow-auto"></div>
            <input type="hidden" name="content" id="content">
        </div>
        <div class="flex gap-2 justify-between">
            <button type="submit" class="btn btn-primary">Сохранить</button>
            <a href="{% url 'groups:group_detail' group.id %}" class="btn btn-outline">Отмена</a>
        </div>
    </form>
</div>

<!-- Quill.js -->
<link href="https://cdn.quilljs.com/1.3.7/quill.snow.css" rel="stylesheet">
<script src="https://cdn.quilljs.com/1.3.7/quill.min.js"></script>
<script>
    const quill = new Quill('#editor-container', {
        theme: 'snow',
        modules: {
            toolbar: [
                [{ header: [1, 2, false] }],
                ['bold', 'italic', 'underline'],
                [{ list: 'ordered' }, { list: 'bullet' }],
                ['link', 'image']
            ]
        }
    });
    document.getElementById('note-form').onsubmit = function () {
        document.getElementById('content').value = JSON.stringify(quill.getContents());
    };
</script>
{% endblock %}
