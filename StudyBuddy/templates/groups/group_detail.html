<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Группа: {{ group.name }}</title>
</head>
<body>
    <h1>Группа: {{ group.name }}</h1>
    <p>{{ group.description }}</p>

    <!-- Навигационные кнопки -->
    <div style="margin-bottom: 20px;">
        <a href="{% url 'groups:group_list' %}" style="margin-right: 10px;">Список групп</a>
        <a href="{% url 'accounts:profile' %}" style="margin-right: 10px;">Профиль</a>
        <a href="{% url 'accounts:logout' %}" style="color: red;">Выход</a>
        {% if request.user == group.owner %}
        <a href="{% url 'groups:edit_group' group.pk %}" style="color: blue;">Редактировать группу</a>
    {% endif %}
    </div>

    <!-- Список участников -->
    <h2>Участники группы:</h2>
<ul>
    {% for member in members %}
        <li>
            {{ member.username }}
            {% if member == group.owner %}
                <strong>(Владелец)</strong>
            {% endif %}
        </li>
    {% endfor %}
</ul>

<!-- Запросы на доступ -->
{% if request.user == group.owner %}
    <h2>Запросы на доступ:</h2>
    <ul>
    {% for user in group.access_requests.all %}
        <li>
            {{ user.username }}
            <a href="{% url 'groups:accept_request' group.pk user.pk %}" style="color: green;">Принять</a>
            <a href="{% url 'groups:decline_request' group.pk user.pk %}" style="color: red;">Отклонить</a>
        </li>
    {% empty %}
        <li>Нет запросов на доступ.</li>
    {% endfor %}
</ul>
{% endif %}

<!-- Секция документов -->
<h2>Документы</h2>
    <ul>
        {% for document in documents %}
            <li>
                <a href="{{ document.file.url }}">{{ document.file.name }}</a> - {{ document.description }}
            </li>
        {% empty %}
            <li>Нет документов</li>
        {% endfor %}
    </ul>
    <a href="{% url 'documents:document_list' group.id %}">Добавить документ</a>

    <!-- Секция конспектов -->
    <h2>Конспекты</h2>
    <ul>
        {% for note in notes %}
            <li>
                <a href="{% url 'notes:note_list' group.id %}">{{ note.title }}</a>
            </li>
        {% empty %}
            <li>Нет конспектов</li>
        {% endfor %}
    </ul>
    <a href="{% url 'notes:note_list' group.id %}">Добавить конспект</a>

    <!-- Секция видеовстреч -->
    <h2>Видеовстречи</h2>
    <ul>
        {% for meeting in meetings %}
            <li>
                <a href="{{ meeting.link }}">{{ meeting.title }}</a> - {{ meeting.scheduled_at }}
            </li>
        {% empty %}
            <li>Нет встреч</li>
        {% endfor %}
    </ul>
    <a href="{% url 'meetings:meeting_list' group.id %}">Добавить встречу</a>



    <!-- Кнопка "Покинуть группу" -->
    <form method="post" action="{% url 'groups:leave_group' group.pk %}">
        {% csrf_token %}
        <button type="submit" style="color: red;">Покинуть группу</button>
    </form>
</body>
</html>
